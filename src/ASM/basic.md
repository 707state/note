<!--toc:start-->
- [基本格式](#基本格式)
- [adrp](#adrp)
- [内存与寄存器](#内存与寄存器)
  - [索引模式](#索引模式)
<!--toc:end-->

# 基本格式

ARM汇编基本格式：
label: opcode operands

- 1号系统调用是exit，4为write，使用方法是设置对应的寄存器后通过自陷的方式svc 0x80来转为内核态。

W和X是两种寄存器，W是64位寄存器的低32位部分。

# adrp

计算页面基地址，它将目标地址的页面基地址（4KB对齐）加载到目标寄存器中。

可以与add或者ldr指令一起使用。

# 内存与寄存器

MOV系列的指令。
STR开头的，也就是store xxx，比如说STRB就是store byte。

```asm
strb w6,[x1]
```
就是把w6寄存器（x6寄存器的低32位值）的值写入到x1寄存器存储的地址。

## 索引模式

索引寻址可以用于一些更特殊的代码模式：

```c++
int *a;
int b = *(++a);
int c = *(a++);
```

对于第二行b的赋值而言，我们需要将a的值加4（int类型宽度为4）后赋值给a，然后取值赋值
对于第三行c的赋值而言，我们需要将a取值赋值，然后将a的值加4（int类型宽度为4）后赋值给a

这两种模式可以分别用：

```c++
ldr    w1, [x0, #4]!
ldr    w1, [x0], #4
```

第一种写法被称为前索引寻址，将x0的值加4赋值给x0后，将对应内存取值赋值给w1
第二种写法被称为后索引寻址，将x0对应的内存取值赋值给w1后，将x0自身值加4赋值给自身
