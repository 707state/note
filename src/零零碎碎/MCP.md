# 为什么MCP弃用了HTTP with SSE?

## 问题

1. 负载不均衡：会话状态单实例存储，导致负载均衡可能要做粘性绘画策略，这样可能有负载不均衡的问题。
2. 服务重启导致绘画状态丢失：基于内存的有状态的连接方式采用会话状态单机内存存储，在服务重启后导致会话状态丢失，导致请求异常。
3. 长连接方式和架构演进趋势不负：未来可能逐步推进的Srverless架构下，执行单元会从微服务时代的服务演进到函数粒度，但是Function的设计内涵就是轻量和灵活按需扩缩，明显区别于“长久保持应用在线”的微服务时代或者单体应用的运行特征，而新的运行特性就是明显和长久保持通讯连接的通讯不匹配。
4. 长连接对于互联网基础设施带来挑战：例如防火墙，对于长连接就不友好。

## Streamable HTTP改进

1. 统一Endpoint: 移除了专门的SSE端点，所有通信通过统一端点；
2. 按需流式传输：服务器可以灵活选择是返回普通HTTP响应还是升级为SSE流；
3. 会话标识：引入会话ID机制，支持状态管理和恢复；
4. 灵活初始化：客户端可通过空GET请求主动初始化SSE流；
