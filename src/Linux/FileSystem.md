# 文件系统的基本组成

Linux文件系统会为每个文件分配两个数据结构：索引节点（Index Node）和目录项（Directory Entry）。

- inode：记录文件的元信息，比如inode编号、文件大小、访问权限、创建时间、修改时间、数据在磁盘的位置等。索引是文件的唯一标识，它们之间一一对应，也同样都会被存储在硬盘中，所以索引节点同样占用磁盘空间。
- dentry：用来记录文件的名字、索引节点指针以及与其他目录项的层级关联关系。多个目录项关联起来，就会形成目录结构，但它与索引节点不同的是，目录项是由内核维护的一个数据结构，不存放与磁盘，而是缓存在内存。

由于索引节点inode唯一表示一个文件，而目录项记录着文件的名字，所以目录项和索引节点的关系是多对一，也ijushishuo,一个文件可以有多个别名。可以参考硬链接/软链接。

## 文件数据是如何存储在磁盘的呢？

磁盘读写的最小单位是扇区，扇区大小只有512B，文件系统把多个扇区组成了一个逻辑块，每一次读写的最小单位就是逻辑块，Linux的逻辑块的大小为4KB，也就是说一次性读写8个扇区，这将大大提高磁盘的读写效率。

# 虚拟文件系统

VFS为操作系统提供了多种文件系统的抽象。

根据存储位置的不同，可以分为：

1. 磁盘的文件系统：Ext4、XFS等。
2. 内存的文件系统：例如/proc、/sys都属于这一类。
3. 网络的文件系统：用来访问其他计算机主机数据的文件系统，例如NFS、SMB等。
